---
# ######################################### Basic Parameters #######################################

# Seed for python's PRNG:
random_seed: 112



# A list of all location types:
locations:
  - House
  - Care Home
  - OW Agriculture
  - OW Extraction
  - OW Manufacturing
  - OW Energy
  - OW Water
  - OW Construction
  - OW Trade
  - OW Transport
  - OW Catering and Accommodation
  - OW ICT
  - OW Finance
  - OW Real Estate
  - OW Technical
  - OW Administration
  - OW Education
  - OW Entertainment
  - OW Other Services
  - Primary School
  - Secondary School
  - Restaurant
  - Outdoor
  - Car
  - Public Transport
  - Shop
  - Medical
  - Hospital
  - Hotel
  - Place of Worship
  - Indoor Sport
  - Cinema or Theatre
  - Museum or Zoo
  - Belgium
  - France
  - Germany
  - Cemetery


# Activities allowed within the simulation, and the locations that may be performed at these locations
activities:
  House: [House, Care Home, Belgium, France, Germany]
  Work: [Care Home, OW Agriculture, OW Extraction, OW Manufacturing, OW Energy, OW Water, OW Construction, OW Trade, OW Transport, 
         OW Catering and Accommodation, OW ICT, OW Finance, OW Real Estate, OW Technical, OW Administration, OW Education, OW Entertainment,
         OW Other Services, Primary School, Secondary School, Restaurant, Public Transport, Shop, Medical, Hospital, Hotel, Place of Worship,
         Indoor Sport, Cinema or Theatre, Museum or Zoo]
  School: [Primary School, Secondary School]
  Restaurant: [Restaurant]
  Outdoor: [Outdoor]
  Car: [Car]
  Public Transport: [Public Transport]
  Shop: [Shop]
  Medical: [Medical]
  Place of Worship: [Place of Worship]
  Indoor Sport: [Indoor Sport]
  Cinema or Theatre: [Cinema or Theatre]
  Museum or Zoo: [Museum or Zoo]
  Visit: [House, Care Home]


# ######################################### Time ###################################################

# Time length of each tick in the simulation. Weeks must contain the same number of ticks, because
# we use weekly routines. This means the week length (604800) should be divisible by the follwoing
# tick length:
tick_length_s: 600

# How long the simulation should run for, in days. Note the number of iterations will be computed
# from the tick length above:
simulation_length_days: 280

# With syntax being anything accepted by Dateparser:
# https://dateparser.readthedocs.io/en/latest/
# the date at which the simulation starts:
epoch: 23th February 2020




# ######################################### Logging ################################################

# Format is https://docs.python.org/3/library/logging.config.html#logging-config-dictschema
logging:
  version: 1
  disable_existing_loggers: False
  formatters:
    standard:
      # format: '%(asctime)s [%(levelname)s] %(name)s: %(message)s'
      format: '[%(levelname)s] %(name)s: %(message)s'
  handlers:
    default:
      level: INFO
      formatter: standard
      class: logging.StreamHandler
      stream: 'ext://sys.stdout'  # Default is stderr
  loggers:
    '':   # root logger
      handlers: ['default']
      level: INFO
      propagate: False
#    'my.packg':
#      handlers: ['default']
#      level: INFO
#      propagate: False
#    '__main__':
#        handlers': ['default']
#        level: DEBUG
#        propagate: False

# ######################################### Output #################################################


telemetry:
  host: 127.0.0.1
  port: 4567

# Output that should be rendered from the simulation:
reporters:
  - cli.TimeReporter:
#  - location_population_plots.LocationPlots:
#      dirname: /tmp/plots
#      types_to_show: []
#      health_to_show: [INFECTED]
#      figure_size: [15, 20]  # width, height
#      every_n: 1


# ######################################### Map ##############################################

map_factory:
  __type__: jrc.JRCMapFactory

  # Used when resampling the density matrix
  random_seed: 40

  # Country code to extract from the distribution data
  country_code: LU
  # File containing initial distribution of population, and see Docs for full format:
  # FIXME: this is currently not relative to config path, but relative to pwd
  population_distribution_fp: Scenarios/Luxembourg/Population Distribution.csv
  # Shapefile describing the borders of the country:
  # FIXME: this is currently not relative to config path, but relative to pwd
  shapefilename: Scenarios/Luxembourg/Map/LIMADM_CANTONS.shp
  # The coordinate system used in the shapefile. If this is ETRS89 (EPSG: 3035) then leave it blank:
  shapefile_coord_system: epsg:2169
  # The following density map scale factor resamples the input map to be of higher resolution,
  # linearly interpolating to produce a smoother population distribution without hard edges. Set
  # this parameter equal to 1 to do no resampling:
  res_fact: 2
  # Density map normalization rescales population within grid squares. In particular, if the
  # population of a certain grid square is zero before resampling and if this option is set True,
  # then after resampling the population of that grid square will also be zero. This is therefore a
  # modification of the linear interpolation to prevent poplation from leaking into previously
  # unpopulated squares, with the cost being the retention of some, but not all, hard edges:
  normalize_interpolation: True


# ######################################### World ##############################################

world_factory:

  __type__: stochastic.StochasticWorldFactory

  # Seed the RND, or leave blank for a timer-based seed
  random_seed: 400

  # The total number of resident agents on the world. If this equals the sum of age_distribution
  # (that is, the real total resident population) then the scale factor for the simulation will be 1,
  # else the location counts and certain other parameters will be scaled according to the ratio of
  # this number and the sum. Note that the true population will be somewhat larger than this number
  # due to the inclusion of border workers (the numbers of which is again calculated using the scale
  # factor).
  n: 16_108

  # For each location type, a number of such locations will be generated. This number will be either
  # fixed or random. The locations with a fixed count are generated according to the following real
  # world distribution:
  deterministic_location_counts:
    Care Home:                        44
    OW Agriculture:                   86
    OW Extraction:                    11
    OW Manufacturing:                 785
    OW Energy:                        98
    OW Water:                         71
    OW Construction:                  4366
    OW Trade:                         4684
    OW Transport:                     1349
    OW Catering and Accommodation:    251
    OW ICT:                           2752
    OW Finance:                       1241
    OW Real Estate:                   1458
    OW Technical:                     8349
    OW Administration:                2433
    OW Education:                     838
    OW Entertainment:                 87
    OW Other Services:                1523
    Primary School:                   181
    Secondary School:                 58
    Restaurant:                       2247
    Outdoor:                          1
    Public Transport:                 1000
    Shop:                             3136
    Medical:                          125
    Hospital:                         11
    Hotel:                            213
    Place of Worship:                 677
    Indoor Sport:                     199
    Cinema or Theatre:                34
    Museum or Zoo:                    77
    Cemetery:                         1

  # These locations have a random count:
  random_location_counts: [House, Car]

  # The border countries, as single locations, are assigned these [lat, lon] (WGS84) coordinates:
  border_country_coord:
    Belgium: [49.683729, 5.814469]
    France: [49.357664, 6.166023]
    Germany: [49.756279, 6.643219]


  # Distribution of non-resident agents by border country.
  border_countries_pop:
    Belgium: 44_900
    France:  94_600
    Germany: 45_100

  # Distribution of resident agents by age.
  age_distribution:
    - 6356  # 0 Years old
    - 6604  # 1 Year old
    - 6645
    - 6653
    - 6724
    - 6837
    - 6878
    - 6749
    - 6609
    - 6921
    - 6687 # 10 Years old
    - 6724
    - 6593
    - 6598
    - 6499
    - 6528
    - 6435
    - 6499
    - 6674
    - 7195
    - 7140  # 20 Years old
    - 7113
    - 7728
    - 8116
    - 8443
    - 8949
    - 9336
    - 9685
    - 9499
    - 10104
    - 9838 # 30 Years old
    - 10090
    - 9849
    - 9989
    - 9667
    - 9708
    - 9787
    - 9922
    - 9807
    - 9927
    - 9530 # 40 Years old
    - 9518
    - 9555
    - 9220
    - 9235
    - 9170
    - 8980
    - 9231
    - 9489
    - 9264
    - 9426 # 50 Years old
    - 9481
    - 9503
    - 9256
    - 9334
    - 9180
    - 8898
    - 8494
    - 8181
    - 7796
    - 7547 # 60 years old
    - 7219
    - 6865
    - 6606
    - 6238
    - 6095
    - 5781
    - 5539
    - 5019
    - 5076
    - 4937 # 70 years old
    - 4811
    - 4502
    - 4199
    - 3611
    - 3557
    - 3499
    - 3320
    - 3011
    - 2905
    - 3012 # 80 Years old
    - 2744
    - 2508
    - 2328
    - 2076
    - 1904
    - 1699
    - 1551
    - 1498
    - 1354
    - 1097 # 90 Years old
    - 814
    - 631
    - 492
    - 375
    - 842 # 95+ Years old

  # ######################################### Household Distribution #################################

  # Distribution of numbers of children and numbers of retired, given house size. The numbers below
  # are derived from 2001 Census data:
  #
  # https://statistiques.public.lu/en/population-employment/index.html
  #
  # Note that categories '5' and '7' were '5+' and '7+' in the 2001 Census data. Note also that
  # 'children' in the 2001 Census data referred to ages 0-14, as opposed to 0-17. The format is:
  #
  #                                 Househould size
  #                   0      1      2      3      4     5     6    7
  #            0 [    x,     x,     x,     x,     x,    x,    x,   x]
  #  Number    1 [    x,     x,     x,     x,     x,    x,    x,   x]
  #    of      2 [    x,     x,     x,     x,     x,    x,    x,   x]
  #   Type     3 [    x,     x,     x,     x,     x,    x,    x,   x]
  #            4 [    x,     x,     x,     x,     x,    x,    x,   x]
  #            5 [    x,     x,     x,     x,     x,    x,    x,   x]
  #            6 [    x,     x,     x,     x,     x,    x,    x,   x]
  #            7 [    x,     x,     x,     x,     x,    x,    x,   x]

  # Household distribution of children:
  household_distribution_children:
    - [    0, 50384, 46191, 15885,  9035, 2514,  784, 276]
    - [    0,     0,  2382, 12257,  4972, 2041,  514, 149]
    - [    0,     0,     0,  1108, 14021, 2180,  720, 205]
    - [    0,     0,     0,     0,   253, 4165,  622, 219]
    - [    0,     0,     0,     0,     0,   38,  737, 150]
    - [    0,     0,     0,     0,     0,    0,    5, 146]
    - [    0,     0,     0,     0,     0,    0,    0,   0]
    - [    0,     0,     0,     0,     0,    0,    0,   0]

  # Household distribution of retired:
  household_distribution_retired:
    - [    0, 33586, 30677, 25001, 26510, 9743, 2706, 821]
    - [    0, 16798,  6893,  2388,  1240,  971,  445, 191]
    - [    0,     0, 11003,  1656,   483,  207,  214, 112]
    - [    0,     0,     0,   206,    36,   11,   12,  19]
    - [    0,     0,     0,     0,    12,    4,    3,   0]
    - [    0,     0,     0,     0,     0,    1,    2,   2]
    - [    0,     0,     0,     0,     0,    0,    0,   0]
    - [    0,     0,     0,     0,     0,    0,    0,   0]

  # Each carehome will be assigned a number of retired people as residents:
  retired_per_carehome: 143

  # ######################################### Workforce Distribution #################################

  # For these locations, workforce weights are uniform:
  workforce_profile_uniform:
    Care Home:                        70
    Primary School:                   35
    Secondary School:                 85
    Public Transport:                 1
    Place of Worship:                 1

  # For these locations, workforce weights are sampled from a distribution determined by the
  # corresponding list. The format is given below:
  workforce_profile_distribution:
    OW Agriculture:                   [76,   8,    1,   1,    0]
    OW Extraction:                    [3,    4,    2,   2,    0]
    OW Manufacturing:                 [369,  201,  101, 88,  26]
    OW Energy:                        [78,   11,   3,   5,    1]
    OW Water:                         [29,   21,   13,  7,    1]
    OW Construction:                  [2786, 1040, 360, 155, 25]
    OW Trade:                         [3570, 621,  159, 83,   7]
    OW Transport:                     [818,  299,  120, 99,  13]
    OW Catering and Accommodation:    [1728, 829,  118, 30,   6]
    OW ICT:                           [2313, 302,  98,  64,   9]
    OW Finance:                       [862,  222,  57,  68,  32]
    OW Real Estate:                   [1353, 92,   11,  2,    0]
    OW Technical:                     [7315, 795,  153, 69,  17]
    OW Administration:                [1958, 298,  85,  67,  25]
    OW Education:                     [789,  41,   6,   2,    0]
    OW Entertainment:                 [295,  47,   16,  5,    0]
    OW Other Services:                [1290, 211,  15,  7,    0]
    Restaurant:                       [1728, 829,  118, 30,   6]
    Shop:                             [2519, 691,  107, 53,  10]
    Medical:                          [13,   2,    1,   11,   0]
    Hospital:                         [0,    0,    0,   0,    8]
    Hotel:                            [1728, 829,  118, 30,   6]
    Indoor Sport:                     [295,  47,   16,  5,    0]
    Cinema or Theatre:                [2313, 302,  98,  64,   9]
    Museum or Zoo:                    [295,  47,   16,  5,    0]

  # The data format was originally [0-4, 5-19, 20-49, 50-249, 250+]. The maximum weight is now given:
  workforce_profile_distribution_format: [[1,5], [5,20], [20,50], [50,250], [250,500]]

  # ######################################### Location Choice ########################################

  # Which activies are assigned locations using a distance distribution, and how many such locations
  # can be visited by each agent:
  activity_locations_by_distance:
    Visit: 10
    Restaurant: 10
    Shop: 10
  # When using a distance distribution, how many locations are included in the sample to which the
  # distribution is applied, noting that a large number will result in performance issues:
  location_sample_size: 100
  # Which activies are assigned locations using a simple random sample, and how many such locations
  # can be visited by each agent:
  activity_locations_by_random:
    Public Transport: 10
    Cinema or Theatre: 10
    Museum or Zoo: 10
  # Which activies are assigned locations using a KDTree, with only one such location is assigned to
  # each agent:
  activity_locations_by_proximity: [Medical, Place of Worship, Indoor Sport]
  # Which activities correspond to going to school, assigned using a KDTree:
  school_locations_by_proximity: [School]
  # For each of the countries listed below, a probability distribution is built on the length of trips
  # between that country and the country being simulated. This discrete probability distribution takes
  # the form of a histogram and is derived from data. The parameters below determine, for country
  # of origin, the width of bins used in the corresponding histograms and the total number of bins.
  # Distances greater than the total range of a histogram will be assigned probability zero. The
  # units here are kilometers.
  number_of_bins:
    Luxembourg: 10
    Belgium:    20
    France:     20
    Germany:    20
  bin_width:
    Luxembourg: 10
    Belgium:    10
    France:     10
    Germany:    10
  # This converts the relevant activities and countries to their labels in the trip data:
  activity_dict:
    Visit: Visite
    Shop: Achats
    Restaurant: Repas
    Work: Travail
  origin_country_dict:
    Luxembourg: Luxembourg
    Belgium: Belgique
    France: France
    Germany: Allemagne
  destination_country: Luxembourg
  # The distances referred to above are distances along a real world transportation network. This
  # typically differs from the spherical distance. Over short distances, the spherical distance is
  # approximately equal to the Euclidean distance. The ratio of the network distance and the Euclidean
  # distance is called the 'network detour ratio'. The network distance is often around 1.25–1.41
  # times the Euclidean distance. The article
  #
  # Hai Yanga, Jintao Kea and Jieping Ye, 'A universal distribution law of network detour ratios',
  # Transportation Research Part C, 2018.
  #
  # suggests that network distance follows a distribution of the form
  #
  # network_distance = euclidean_distance*alpha + beta
  #
  # for two parameters alpha and beta, which the authors determine as follows:
  alpha: 1.2988
  beta:  0.3838

  # Schools
  # Number of classes per school:
  num_classes_per_school:
    Primary School:   17
    Secondary School: 34

  # Age at which children start school:
  starting_age:
    4:  Primary School
    12: Secondary School


# ######################################### Movement ##############################################

# Configures the movement model used during simulation
movement_model:
  __type__: simple_random.SimpleRandomMovementModel

  # When responding to activity changes, the location model will move agents.
  # Add a location type to the list below if this shouldn't happen when the agent is
  # in a certain health state
  no_move_health_states:
    - Hospital
    - Cemetery



# ######################################### Activity #####################################
# Configure the component that drives agents performing different activities in the simulation
activity_model:

  __type__: tus_survey.TUSMarkovActivityModel
  # TODO: __type__

  # File containing time use survey data, and see Docs for full format:
  time_use_filepath: Time Use.csv

  # TUS data are read at a ten-minute interval.
  #
  # This parameter should be set to the simulation tick duration in seconds, so that the TUS
  # data can be resampled to match the simulation resolution
  tick_length_s: 600

  # Which activities are coded in the dataset.
  # Codes in the primary column are less specific, but used first.
  # codes in the secondary column are used if certain codes are in the primary column.
  #
  # Format is
  #   Activity Label:
  #     primary: [code, code,...]
  #     secondary: [code, code,...]
  activity_code_map:
    House:
      primary: [1]
      secondary: [11,12,13,14,21,22,23,31,34,35,39,115,121,213,214,221,222,231,239,311,314,315,324,
                  325,326,327,328,329,333,346,347,349,351,353,354,356,363,364,371,381,382,383,384,
                  386,391,393,419,421,422,431,432,433,434,511,512,522,551,711,713,714,719,733,734,
                  737,739,744,745,746,747,749,811,812,813,819,821,829,839]
    Work:
      primary: [2]
      secondary: [111]
    School:
      primary: [3]
      secondary: [232,233]
    Restaurant:
      primary: [5]
      secondary: [546,547]
    Outdoor:
      primary: [6,9,10,11,12,14]
      secondary: [343,345,411,412,413,415,424,439,525,539,541,542,543,545,548,549,612,613,614,617,618,619,629]
    Car:
      primary: [13]
    Public Transport:
      primary: [15,16,17,18,19]
    Shop:
      secondary: [361,362,366,367,368,369,425]
    Medical:
      secondary: [365]
    Place of Worship:
      secondary: [435]
    Indoor Sport:
      secondary: [544,615,616]
    Cinema or Theatre:
      secondary: [531,532,533]
    Museum or Zoo:
      secondary: [534]
    Visit:
      primary: [4]
      secondary: [395,426,429,515,521,523,524]

  # If agents are in these states, stop the markov chain
  stop_activity_health_states:
    - DEAD

# ######################################### Population and Age #####################################


# ######################################### Virus and Disease ######################################

disease_model:

  __type__: compartmental.CompartmentalModel

  # If the PPM intervention is enabled, these must match for the model to be valid.
  # Avoiding this dependency is a TODO list item!
  personal_protective_measures:
    ppm_coeff: 0.7
    # The probability that an agent follows the recommendations in place:
    prob_do_recommendation: 1.0
    # The probability that an individual wears a mask in each location, given that the individual follows
    # the recommendations in place:
    prob_wear_mask:
      House:                          0.0
      Care Home:                      0.2
      OW Agriculture:                 0.2
      OW Extraction:                  0.2
      OW Manufacturing:               0.2
      OW Energy:                      0.2
      OW Water:                       0.2 
      OW Construction:                0.2
      OW Trade:                       0.2
      OW Transport:                   0.2
      OW Catering and Accommodation:  0.2
      OW ICT:                         0.2
      OW Finance:                     0.2
      OW Real Estate:                 0.2
      OW Technical:                   0.2
      OW Administration:              0.2
      OW Education:                   0.2
      OW Entertainment:               0.2
      OW Other Services:              0.2
      Primary School:                 0.2
      Secondary School:               0.2
      Restaurant:                     0.2
      Outdoor:                        0.0
      Car:                            0.0
      Public Transport:               1.0
      Shop:                           1.0
      Medical:                        1.0
      Hospital:                       1.0
      Hotel:                          1.0
      Place of Worship:               1.0
      Indoor Sport:                   0.2
      Cinema or Theatre:              0.2
      Museum or Zoo:                  1.0
      Belgium:                        0.0
      France:                         0.0
      Germany:                        0.0
      Cemetery:                       0.0

  # The health states appearing in this model are as follows:
  health_states: [SUSCEPTIBLE, EXPOSED, ASYMPTOMATIC, PREINFECTED, INFECTED, HOSPITALIZING, VENTILATING, RECOVERED, DEAD]
  # Agents in the following states are categorized as exposed:
  incubating_states: [EXPOSED]
  # Agents in the following states can transmit the virus:
  contagious_states: [ASYMPTOMATIC, PREINFECTED, INFECTED, HOSPITALIZING, VENTILATING]
  # Agents in the following states are symptomatic:
  symptomatic_states: [INFECTED, HOSPITALIZING, VENTILATING]
  # Agents in the following states are contagious but asymptomatic:
  asymptomatic_states: [ASYMPTOMATIC, PREINFECTED]
  # Agents in the following states will be moved to a hospital:
  hospital_states: [HOSPITALIZING, VENTILATING]
  # Agents in the following states will be moved to a cemetery:
  dead_states: [DEAD]
  # A list of possibile trajectories through the health states is encoded as follows:
  disease_profile_list: [SEAR, SEPIR, SEPID, SEPIHR, SEPIHD, SEPIHVHR, SEPIHVD]
  # The reduction in transmission probability among agents in asymptomatic states:
  asympt_factor: 0.55
  # For a given age x and step size
  disease_profile_distribution_by_age_step_size: 5
  # the following dictionary provides a probability distribution over the list of disease profiles
  # for agents belonging to the age range range(x,x+d), where d equals the step size:
  disease_profile_distribution_by_age:
    0:    [0.71,0.269716024,0,0.010141988,0,0.010141988,0]
    5:    [0.71,0.278956502,0,0.011043498,0,0,0]
    10:   [0.79,0.21,0,0,0,0,0]
    15:   [0.79,0.205791044,0,0.002104478,0,0.002104478,0]
    20:   [0.73,0.255836189,0,0.014163811,0,0,0]
    25:   [0.73,0.263128448,0,0.006871552,0,0,0]
    30:   [0.67,0.31064292,0,0.017974432,0,0.001382649,0]
    35:   [0.67,0.309407444,0,0.019008513,0,0.001584043,0]
    40:   [0.6,0.355022407,0,0.03418297,0,0.010794622,0]
    45:   [0.6,0.345350688,0,0.045280858,0,0.009368453,0]
    50:   [0.51,0.425408717,0,0.056992308,0,0.007598974,0]
    55:   [0.51,0.371044387,0,0.109625761,0,0.009329852,0]
    60:   [0.37,0.450067141,0,0.143946287,0,0.02998881,0.005997762]
    65:   [0.37,0.375572645,0.01375283,0.185663205,0,0.03143504,0.02357628]
    70:   [0.31,0.183250315,0,0.366073044,0.03137769,0.054649476,0.054649476]
    75:   [0.31,0.120160996,0.042737925,0.390668471,0.050956757,0.085475851,0]
    80:   [0.31,0.00682635,0.118241593,0.355819609,0.156560628,0.017517273,0.035034546]
    85:   [0.31,0.080507251,0.14627826,0.288154627,0.162870007,0,0.012189855]
    90:   [0.31,0.060234992,0.218489901,0.231342248,0.179932859,0,0]

  # Disease durations in days (C: constant, G: gamma, U: uniform):
  durations_by_profile:
    SEAR:     [None,[G,[4,0.75]],[G,[4,1.25]] ,None]
    SEPIR:    [None,[G,[4,0.75]],[G,[4,0.525]],[G,[4,0.725]],None]
    SEPID:    [None,[G,[4,0.75]],[G,[4,0.525]],[U,[10,15]]  ,None]
    SEPIHR:   [None,[G,[4,0.75]],[G,[4,0.525]],[U,[5,9]]    ,[U,[8,21]],None]
    SEPIHD:   [None,[G,[4,0.75]],[G,[4,0.525]],[U,[5,9]]    ,[U,[5,16]],None]
    SEPIHVHR: [None,[G,[4,0.75]],[G,[4,0.525]],[U,[5,9]]    ,[U,[3,5]] ,[U,[2,12]],[U,[2,4]],None]
    SEPIHVD:  [None,[G,[4,0.75]],[G,[4,0.525]],[U,[5,9]]    ,[U,[3,5]] ,[U,[7,10]],None]
  # How many people are infected at the start of the simulation, with these agents being chosen
  # uniformly at random:
  initial_infections: 10
  # How many susceptible people are randomly selected for exposure on midnight each day:
  random_exposures: 2
  # The probability of other agents sharing a given location catching the pathogen each time tick:
  infection_probabilities_per_tick:
    House:                            0.00035
    Care Home:                        0.00035
    OW Agriculture:                   0.00035
    OW Extraction:                    0.00035
    OW Manufacturing:                 0.00035
    OW Energy:                        0.00035
    OW Water:                         0.00035
    OW Construction:                  0.00035
    OW Trade:                         0.00035
    OW Transport:                     0.00035
    OW Catering and Accommodation:    0.00035
    OW ICT:                           0.00035
    OW Finance:                       0.00035
    OW Real Estate:                   0.00035
    OW Technical:                     0.00035
    OW Administration:                0.00035
    OW Education:                     0.00035
    OW Entertainment:                 0.00035
    OW Other Services:                0.00035
    Primary School:                   0.00035
    Secondary School:                 0.00035
    Restaurant:                       0.00035
    Outdoor:                          0.0
    Car:                              0.00035
    Public Transport:                 0.00035
    Shop:                             0.00035
    Medical:                          0.00035
    Hospital:                         0.00035
    Hotel:                            0.00035
    Place of Worship:                 0.00035
    Indoor Sport:                     0.00035
    Cinema or Theatre:                0.00035
    Museum or Zoo:                    0.00035
    Belgium:                          0.0
    France:                           0.0
    Germany:                          0.0
    Cemetery:                         0.0

# ######################################### Interventions ##########################################
# Interventions list
#
# Each intervention has a unique ID, a type, and a configuration block.
# These interventions occur in-order in the simulation.  This is important because some,
# such as quarantine, may interrupt actions other are interested in.
interventions:

  # Moves agents to locations when they are in certain health states
  basic_hospitalisation:
    # This special key defines the class to use.
    __type__: hospitalisation.Hospitalisation
    # Starting state of the intervention
    __enabled__: true
    # This special key defines when to disable/enable the intervention
    __schedule__:
    # Things below this line are passed to the intervention as config

    # Agents in the following states will be moved to a hospital:
    hospital_states: [HOSPITALIZING, VENTILATING]
    # Agents in the following states will be moved to a cemetery:
    dead_states: [DEAD]
    # How to find locations to move agents to
    cemetery_location_type: Cemetery
    hospital_location_type: Hospital



  # The intervention refers to a system that distributes
  # invitations to test, across the population, according to a certain algorithm.
  large_scale_testing:
    __type__: testing.LargeScaleTesting
    __enabled__: false
    __schedule__:
      18th May 2020: enable
    # The number of agents selected uniformly at random for testing each day:
    tests_per_day: 5000
    # The time between an invitation to test being received and the agent booking a test:
    invitation_to_test_booking_days: 6



  # The intervention 'test_booking' simply refer to the system that books tests for agents, should
  # they request a booking.
  test_booking:
    __type__: laboratory.TestBooking
    __enabled__: true
    __schedule__:

    # The time taken between the booking of a test and the time at which the test takes place, in the
    # case where the agent is not showing symptoms at the time of booking:
    test_booking_to_test_sample_days_no_symptoms: 4
    # The time taken between the booking of a test and the time at which the test takes place, in the
    # case where the agent is showing symptoms at the time of booking:
    test_booking_to_test_sample_days_symptoms: 2
    # Agents in the following states are symptomatic:
    symptomatic_states: [INFECTED, HOSPITALIZING, VENTILATING]


  # The intervention 'test_sampling' refers to lab testing. If an agent is tested and if the agent is
  # is either incubating or contagious with the virus, then the test returns a positive result, except
  # in the case of a false postive, while if the agent is not either incubating or contagious with the
  # virus, then the test returns a negative results, except in the case of a false negative.
  test_lab:
    __type__: laboratory.Laboratory
    __enabled__: true
    __schedule__:
    # The probability of a false positive:
    prob_false_positive: 0.01
    # The probability of a false negative:
    prob_false_negative: 0.01
    # The time taken between a test and publishing of the result of that test:
    do_test_to_test_results_days: 2
    # Agents in the following states are categorized as exposed:
    incubating_states: [EXPOSED]
    # Agents in the following states can transmit the virus:
    contagious_states: [ASYMPTOMATIC, PREINFECTED, INFECTED, HOSPITALIZING, VENTILATING]


  # The intervention 'contact_tracing_app' refers to contact tracing perform not manually, but via an
  # application installed on the phones of agents. A certain proportion of the population is assumed
  # to possess the app from the very beginning. The app works according to the Corona-Warn-App, which
  # is the official COVID-19 exposure notification app developed for Germany. The window of time over
  # which contacts are considered is specified.
  contact_tracing_app:
    __type__: contact_tracing.ContactTracingApp
    __enabled__: false
    __schedule__:
    # Proportion of population who have the app:
    app_prevalence: 0.2
    # The window of time over which contacts are considered:
    tracing_time_window_days: 14
    # Contacts are assumed to occur when two agents are in the same location at the same time. So long
    # as the tick length is at least 600 seconds, this assumption implies the following vaules for the
    # app parameters, full details of which are described in the documentation of the Corona-Warn-App:
    duration_wgt: 1
    attenuation_wgt: 1
    days_since_last_expsr_wgt: 5
    # The risk level is calculated according to the base case specified by the Corona-Warn-App, the
    # units of the indices being days and the length of which should be equal to the window length:
    trans_risk_level_base_case: [5, 6, 8, 8, 8, 5, 3, 1, 1, 1, 1, 1, 1, 1]
    # Threshold parameters as specified by the Corona-Warn-App:
    trans_risk_threshold: 11
    time_at_risk_threshold_mins: 15
    # Average risk used in calculating total time at risk, as specified by the Corona-Warn-App:
    av_risk_mins: 25
    # Agents follow the advice to quarantine and immediately book a test with the following
    # probability:
    prob_do_recommendation: 1.0
    # Locations except from the contact tracing proceedure are as follows:
    location_blacklist: [Outdoor, Cemetery, Belgium, France, Germany]



  # The intervention 'contact_tracing' refers to the manual tracing of contacts of agents with postive
  # test results. The maximum number of positive agents whose contacts can be traced is specified, as
  # is the window of time over which such contacts are registered. Contacts are considered to be
  # agents who performed one of the specified regular activities in the same location as the agent, so
  # long as the agent was also performing one such activity. For example, if the agent was working in
  # a given location and another agent was also working there, at the same time, then the agent would
  # remember the contact with the other agent. Conversely, if the location was, for example, a shop
  # with the other agent only shopping there, then the first agent would not remember this. Other
  # agents traced though this proceedure are instructed to get tested and quarantine in the meantime.
  # With a certain probability, agents do not follow this advice and continue as normal.
  contact_tracing_manual:
    __type__: contact_tracing.ContactTracingManual
    __enabled__: false
    __schedule__:
      200: enable
      1000: enable

    # The maximum number of positive agents whose contacts can be tested each day:
    max_per_day: 100
    # The window of time over which contacts are considered:
    tracing_time_window_days: 2
    # The activities considered relevant for the purposes of contact tracing:
    relevant_activities: [House, Work, School, Visit]
    # Agents follow the advice to quarantine and immediately book a test with the following
    # probability:
    prob_do_recommendation: 1.0
    # Locations except from the contact tracing proceedure are as follows:
    location_type_blacklist: [Cemetery, Belgium, France, Germany]






  # The intervention 'quarantine' directs agents to return home, under certain conditions. The list of
  # possible conditions includes that the agent has tested positive, the agent has been recommended to
  # quarantine after contact tracing (either manually or via the app) and that the agent is trying to
  # access a prohibited location (for example, a border worker during a period of border closure). The
  # intervention 'quarantine' is the tool that enforces and lifts such quarantines. Requests for
  # quarantines are made by other interventions.
  quarantine_at_home:
    __type__: quarantine.Quarantine
    __enabled__: true
    __schedule__:

    # If this is true, disabling quarantine immediately allows people to change
    # else it simply disables putting new people into quarantine, and they still have to
    # wait out their allotted time.
    disable_releases_immediately: false
    # Quarantining directs an agent home for a default duration:
    default_duration_days: 14
    # In the case that a quarantine has been imposed on an agent on an individual basis, and if that
    # agent tests negative during such a quarantine, then the quarantine of that agent will end after
    # the following number of days:
    negative_test_result_to_end_quarantine_days: 2
    # If an agent is present in one of the following locations, then they are exempt from quarantining
    # under all circumstances:
    location_blacklist: [Hospital, Cemetery]
    # Unless an agent is in an exempt location, they are directed to the location at which they
    # perform the activity 'House':
    home_activity_type: House
    # home_activity_type: Outdoor


  # The interventions 'location_closure' refer to closure of all locations of a certain type. In the
  # event that an agent would otherwise move to such a location, that move will be cancelled or
  # overridden with the agent being sent home.

  location_closure_house:
    __type__: location_closure.LocationClosures
    __enabled__: false
    __schedule__:
      15th March 2020: enable
      11th May 2020: disable
    # A list of location type subject to possible closures, one of the notable exceptions being shops.
    # Whether or not a location is closed may depend on the activity in question (for example, visits
    # to care homes may be prohibited while residents and workers continue to be able to access the
    # care home.
    locations:
      - House
    # Unless an agent is in an exempt location, they are directed to the location at which they
    # perform the activity 'House':
    home_activity_type: House

  location_closure_carehome:
    __type__: location_closure.LocationClosures
    __enabled__: false
    __schedule__:
      15th March 2020: enable
      20th May 2020: disable
    # A list of location type subject to possible closures, one of the notable exceptions being shops.
    # Whether or not a location is closed may depend on the activity in question (for example, visits
    # to care homes may be prohibited while residents and workers continue to be able to access the
    # care home.
    locations:
      - Care Home
    # Unless an agent is in an exempt location, they are directed to the location at which they
    # perform the activity 'House':
    home_activity_type: House

  location_closure_ow_1:
    __type__: location_closure.LocationClosures
    __enabled__: false
    __schedule__:
      19th March 2020: enable
      24th June 2020: disable
    # A list of location type subject to possible closures, one of the notable exceptions being shops.
    # Whether or not a location is closed may depend on the activity in question (for example, visits
    # to care homes may be prohibited while residents and workers continue to be able to access the
    # care home.
    locations:
      - OW Agriculture
      - OW Manufacturing
      - OW Energy
      - OW Water
      - OW Transport
    # Unless an agent is in an exempt location, they are directed to the location at which they
    # perform the activity 'House':
    home_activity_type: House

  location_closure_ow_2:
    __type__: location_closure.LocationClosures
    __enabled__: false
    __schedule__:
      19th March 2020: enable
      24th June 2020: disable
    # A list of location type subject to possible closures, one of the notable exceptions being shops.
    # Whether or not a location is closed may depend on the activity in question (for example, visits
    # to care homes may be prohibited while residents and workers continue to be able to access the
    # care home.
    locations:
      - OW Extraction
      - OW Trade
      - OW ICT
      - OW Finance
      - OW Real Estate
      - OW Technical
      - OW Administration
      - OW Education
    # Unless an agent is in an exempt location, they are directed to the location at which they
    # perform the activity 'House':
    home_activity_type: House

  location_closure_ow_construction:
    __type__: location_closure.LocationClosures
    __enabled__: false
    __schedule__:
      19th March 2020: enable
      20th April 2020: disable
    # A list of location type subject to possible closures, one of the notable exceptions being shops.
    # Whether or not a location is closed may depend on the activity in question (for example, visits
    # to care homes may be prohibited while residents and workers continue to be able to access the
    # care home.
    locations:
      - OW Construction
    # Unless an agent is in an exempt location, they are directed to the location at which they
    # perform the activity 'House':
    home_activity_type: House

  location_closure_ow_entertainment:
    __type__: location_closure.LocationClosures
    __enabled__: false
    __schedule__:
      15th March 2020: enable
      29th May 2020: disable
    # A list of location type subject to possible closures, one of the notable exceptions being shops.
    # Whether or not a location is closed may depend on the activity in question (for example, visits
    # to care homes may be prohibited while residents and workers continue to be able to access the
    # care home.
    locations:
      - OW Entertainment
    # Unless an agent is in an exempt location, they are directed to the location at which they
    # perform the activity 'House':
    home_activity_type: House

  location_closure_leisure:
    __type__: location_closure.LocationClosures
    __enabled__: false
    __schedule__:
      15th March 2020: enable
      29th May 2020: disable
    # A list of location type subject to possible closures, one of the notable exceptions being shops.
    # Whether or not a location is closed may depend on the activity in question (for example, visits
    # to care homes may be prohibited while residents and workers continue to be able to access the
    # care home.
    locations:
      - Indoor Sport
      - Cinema or Theatre
      - Museum or Zoo
      - Restaurant
    # Unless an agent is in an exempt location, they are directed to the location at which they
    # perform the activity 'House':
    home_activity_type: House

  location_closure_pow:
    __type__: location_closure.LocationClosures
    __enabled__: false
    __schedule__:
      14th March 2020: enable
      29th May 2020: disable
    # A list of location type subject to possible closures, one of the notable exceptions being shops.
    # Whether or not a location is closed may depend on the activity in question (for example, visits
    # to care homes may be prohibited while residents and workers continue to be able to access the
    # care home.
    locations:
      - Place of Worship
    # Unless an agent is in an exempt location, they are directed to the location at which they
    # perform the activity 'House':
    home_activity_type: House

  location_closure_school:
    __type__: location_closure.LocationClosures
    __enabled__: false
    __schedule__:
      16th March 2020: enable
      11th May 2020: disable
      16th July 2020: enable
      15th September 2020: disable
    # A list of location type subject to possible closures, one of the notable exceptions being shops.
    # Whether or not a location is closed may depend on the activity in question (for example, visits
    # to care homes may be prohibited while residents and workers continue to be able to access the
    # care home.
    locations:
      - Primary School
      - Seconary School
    # Unless an agent is in an exempt location, they are directed to the location at which they
    # perform the activity 'House':
    home_activity_type: House

  curfew:
    __type__: curfew.Curfew
    __enabled__: false
    __schedule__:
    # Hours of operation
    start_time: 23
    end_time: 6
    # A list of location types subject to closures during given hours
    locations:
      - House
      - Care Home
      - OW Agriculture
      - OW Extraction
      - OW Manufacturing
      - OW Energy
      - OW Water
      - OW Construction
      - OW Trade
      - OW Transport
      - OW Catering and Accommodation
      - OW ICT
      - OW Finance
      - OW Real Estate
      - OW Technical
      - OW Administration
      - OW Education
      - OW Entertainment
      - OW Other Services
      - School
      - Restaurant
      - Outdoor
      - Car
      - Public Transport
      - Shop
      - Medical
      - Hotel
      - Place of Worship
      - Indoor Sport
      - Cinema or Theatre
      - Museum or Zoo
    # Unless an agent is in an exempt location, they are directed to the location at which they
    # perform the activity 'House':
    home_activity_type: House

  # The intervention 'other_testing' refers to situations where an agent books a test without having
  # been directed to do so by any of the other interventions. Chief among these are the situations in
  # which an agent voluntarily books a test having developed symptoms.
  other_testing:
    __type__: testing.OtherTesting
    __enabled__: false
    __schedule__:
    # The probability that an agent books a test at the moment they develop symptoms. This corresponds
    # to the real-world scenario in which an agent develops symptoms and goes to see a doctor, who
    # recommends the agent to get tested.
    prob_test_symptoms: 1.0
    # Time between onset of symptoms and booking of a test:
    onset_of_symptoms_to_test_booking_days: 1
    # Agents in the following states are symptomatic:
    symptomatic_states: [INFECTED, HOSPITALIZING, VENTILATING]


  # The intervention 'personal_protective_measures' refers to the effect of such measures as hand
  # hygiene, face masks, surface and object cleaning and other environmental measures. The combined
  # effect of such measures is represented as a coefficient in the range (0,1] that multiplies the
  # transmission probabilty.
  ppm:
    __type__: ppm.PersonalProtectiveMeasures
    __enabled__: false
    __schedule__:
    # Agents attempting to transition to these states will occasionally have the transition
    # blocked, representing PPM working
    incubating_states: [EXPOSED]
    # According to https://arxiv.org/pdf/2004.13553.pdf the effect of face masks is modelled by the
    # mask transmission rate and mask absorption rate, which denote the proportion of viruses that are
    # stopped by the mask during exhaling (transmission) versus inhaling (absorption), respectively.
    # The authors set both these rates equal to 0.7, to model the use of inexpensive, widely available
    # and even nonmedical or homemade masks.
    ppm_coeff: 0.7
    # The probability that an agent follows the recommendations in place:
    prob_do_recommendation: 1.0
    # The probability that an individual wears a mask in each location, given that the individual follows
    # the recommendations in place:
    prob_wear_mask:
      House:                          0.0
      Care Home:                      0.2
      OW Agriculture:                 0.2
      OW Extraction:                  0.2
      OW Manufacturing:               0.2
      OW Energy:                      0.2
      OW Water:                       0.2 
      OW Construction:                0.2
      OW Trade:                       0.2
      OW Transport:                   0.2
      OW Catering and Accommodation:  0.2
      OW ICT:                         0.2
      OW Finance:                     0.2
      OW Real Estate:                 0.2
      OW Technical:                   0.2
      OW Administration:              0.2
      OW Education:                   0.2
      OW Entertainment:               0.2
      OW Other Services:              0.2
      Primary School:                 0.2
      Secondary School:               0.2
      Restaurant:                     0.2
      Outdoor:                        0.0
      Car:                            0.0
      Public Transport:               1.0
      Shop:                           1.0
      Medical:                        1.0
      Hospital:                       1.0
      Hotel:                          1.0
      Place of Worship:               1.0
      Indoor Sport:                   0.2
      Cinema or Theatre:              0.2
      Museum or Zoo:                  1.0
      Belgium:                        0.0
      France:                         0.0
      Germany:                        0.0
      Cemetery:                       0.0
    # Note that the above probabilities refer to the default 600 second time interval, and must be
    # recalculating otherwise.